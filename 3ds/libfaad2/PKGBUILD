pkgname=3ds-libfaad2
pkgver=2_10_0
pkgrel=1
pkgdesc="Freeware Advanced Audio (AAC) Decoder including SBR decoding"
arch=('any')
url="https://sourceforge.net/projects/faac/"
license=('GPLv2')
options=(!strip libtool staticlibs)
source=("https://github.com/knik0/faad2/archive/refs/tags/${pkgver}.tar.gz")
sha256sums=('0c6d9636c96f95c7d736f097d418829ced8ec6dbd899cc6cc82b728480a84bfb')
makedepends=('3ds-pkg-config' 'dkp-toolchain-vars')
groups=('3ds-portlibs')

build() {
  cd faad2-$pkgver
  source /opt/devkitpro/3dsvars.sh
  ./bootstrap
  ./configure --prefix="${PORTLIBS_PREFIX}" --host=arm-none-eabi --disable-shared --enable-static
  make
}

package() {
  cd faad2-$pkgver
  source /opt/devkitpro/3dsvars.sh
  make DESTDIR="$pkgdir" install
}
